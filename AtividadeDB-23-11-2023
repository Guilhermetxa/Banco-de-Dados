CREATE DATABASE IF NOT EXISTS REDESOCIAL;
USE REDESOCIAL;

-- 1
CREATE TABLE IF NOT EXISTS USUARIO(
ID INT PRIMARY KEY AUTO_INCREMENT,
NOME_USUARIO VARCHAR(255) NOT NULL,
DATA_NASCIMENTO DATE
);

-- 2
CREATE TABLE IF NOT EXISTS POSTAGENS(
ID INT PRIMARY KEY AUTO_INCREMENT,
TEXTO VARCHAR(255) NOT NULL,
DATA_HORA DATETIME,
USUARIO_ID INT NOT NULL,
CONSTRAINT POSTAGEM_USUARIO FOREIGN KEY (USUARIO_ID) REFERENCES USUARIO(ID)
);

-- 3
CREATE TABLE IF NOT EXISTS COMENTARIOS(
ID INT PRIMARY KEY AUTO_INCREMENT,
TEXTO VARCHAR(255) NOT NULL,
DATA_HORA DATETIME,
USUARIO_ID INT NOT NULL,
POSTAGEM_ID INT NOT NULL,
CONSTRAINT COMENTARIO_USUARIO FOREIGN KEY (USUARIO_ID) REFERENCES USUARIO(ID),
CONSTRAINT POSTAGEM_COMENTARIO FOREIGN KEY (POSTAGEM_ID) REFERENCES POSTAGENS(ID)
);

-- 4
CREATE TABLE IF NOT EXISTS AMIZADES(
ID INT PRIMARY KEY AUTO_INCREMENT,
USUARIO1_ID INT NOT NULL,
USUARIO2_ID INT NOT NULL,
DATA_CONEXAO DATETIME,
CONSTRAINT AMIZADE_USUARIO1 FOREIGN KEY (USUARIO1_ID) REFERENCES USUARIO(ID),
CONSTRAINT AMIZADE_USUARIO2 FOREIGN KEY (USUARIO2_ID) REFERENCES USUARIO(ID)
);

-- 5
CREATE TABLE IF NOT EXISTS CURTIDAS(
ID INT PRIMARY KEY AUTO_INCREMENT,
DATA_CURTIDA DATETIME,
USUARIO_ID INT NOT NULL,
POSTAGEM_ID INT NOT NULL,
CONSTRAINT CURTIDA_USUARIO FOREIGN KEY (USUARIO_ID) REFERENCES USUARIO(ID),
CONSTRAINT CURTIDA_POSTAGEM FOREIGN KEY (POSTAGEM_ID) REFERENCES POSTAGENS(ID)
);

-- 6
CREATE TABLE IF NOT EXISTS GRUPOS(
ID INT PRIMARY KEY AUTO_INCREMENT,
NOME VARCHAR(255),
DESCRICAO VARCHAR(255)
);

-- 7
CREATE TABLE IF NOT EXISTS MEMBROS_DE_GRUPO(
ID INT PRIMARY KEY AUTO_INCREMENT, 
USUARIO_ID INT NOT NULL,
GRUPO_ID INT NOT NULL,
DATA_ADESAO DATE,
CONSTRAINT MEMBRO_USUARIO FOREIGN KEY(USUARIO_ID) REFERENCES USUARIO(ID),
CONSTRAINT MEMBRO_GRUPO FOREIGN KEY(GRUPO_ID) REFERENCES GRUPOS(ID)
);
